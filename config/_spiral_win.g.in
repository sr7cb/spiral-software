# This file is generated by CMake and will be overwritten if you
# re-run make install

##  Copyright (c) 2018-2021, Carnegie Mellon University
##  See LICENSE for details

if not IsBound(LocalConfig) then
	#Print("\nLoading spiral\n");
	Load(spiral);
fi;

LoadPackage("arep");

LocalConfig.cpuinfo := CopyFields(SupportedCPUs.@CPU_ARCH_TYPE@, rec(
    freq := @CPU_FREQUENCY@
));

LocalConfig.osinfo := SupportedOSs.@SPIRAL_OS_NAME@;

# set to true to use ICC or GCC for profiling, otherwise default to Visual Studio

UseICC := @USE_COMPILER_ICC@;
UseGCC := @USE_COMPILER_GCC@;
UseLLVM := @USE_COMPILER_LLVM@;
UseNVCC := @USE_COMPILER_NVCC@;

if (UseICC) then
	# ICC
	SpiralDefaults.profile := spiral.profiler.default_profiles.win_x64_icc;
	SpiralDefaults.target := rec(name:="win-x64-icc");
	LocalConfig.compilerinfo := SupportedCompilers.IntelC;
 
elif (UseGCC) then
	# GCC
	SpiralDefaults.profile := spiral.profiler.default_profiles.win_x86_gcc;
	SpiralDefaults.target := rec(name:="win-x86-gcc");
	LocalConfig.compilerinfo := SupportedCompilers.GnuC;
 
elif (UseLLVM) then
	# LLVM
	SpiralDefaults.profile := spiral.profiler.default_profiles.win_x86_llvm;
	SpiralDefaults.target := rec(name:="win-x86-llvm");
	LocalConfig.compilerinfo := SupportedCompilers.Llvm_Clang;

elif (UseNVCC) then
	# NVCC - Cuda
	SpiralDefaults.profile := spiral.profiler.default_profiles.win_x64_cuda;
	SpiralDefaults.target := rec(name := "win-x64-cuda");
	LocalConfig.compilerinfo := SupportedCompilers.NvidiaCuda;
	
else
	# Visual Studio
	SpiralDefaults.profile := spiral.profiler.default_profiles.win_x86_vcc;
	SpiralDefaults.target := rec(name:="win-x86-vcc");
	LocalConfig.compilerinfo := SupportedCompilers.VisualC;
fi;

