

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Find a Good Rule Tree with Dynamic Programming &mdash; SPIRAL  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3D FFT with AVX Using Dynamic Programming Search" href="dpsearch3d.html" />
    <link rel="prev" title="Threaded FFT with OpenMP" href="ompfft.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SPIRAL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#basic-ffts">Basic FFTs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="firstfft.html">Generate a Simple FFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="simdfft.html">FFT with SIMD Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ompfft.html">Threaded FFT with OpenMP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Find a Good Rule Tree with Dynamic Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="dpsearch3d.html">3D FFT with AVX Using Dynamic Programming Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#advanced-examples-from-fftx">Advanced Examples from FFTX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#advanced-examples-from-darpa-brass-demonstrating-hcol">Advanced Examples from DARPA BRASS Demonstrating HCOL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gap3/index.html">GAP3 Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spiral_objects/index.html">SPIRAL Objects and Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infrastructure/index.html">SPIRAL Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/index.html">Special Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugger.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profiler/index.html">Profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gethelp.html">Getting Help with SPIRAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing to SPIRAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Further Reading</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SPIRAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li>Find a Good Rule Tree with Dynamic Programming</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/examples/basic/dpsearch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="find-a-good-rule-tree-with-dynamic-programming">
<h1>Find a Good Rule Tree with Dynamic Programming<a class="headerlink" href="#find-a-good-rule-tree-with-dynamic-programming" title="Permalink to this headline">¶</a></h1>
<p>The previous examples all use RandomRuleTree() to build a tree of breakdown rules for the transform.  It’s
a quick way to get a valid rule tree for experimentation, but the random choice means the resulting code
will probably not perform very well compared to a really good tree.  For larger transforms there are just too many
possible rule trees to try every one, so SPIRAL provides a dynamic programming-based search that assembles a
good rule tree bottom up by finding the best smaller components.</p>
<p>This example shows how to use the dynamic programming search
function, DP().  It uses the SPIRAL profiler to measure performance, so make sure the profiler is properly
installed and configured (see <a class="reference internal" href="../../gettingstarted.html#installing"><span class="std std-ref">Installing SPIRAL</span></a>).</p>
<p>The script will run for quite a while and generate a lot of progress messages.  Follow
it along to get an idea of how it works from bottom up to build a good tree.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>opts := SIMDGlobals.getOpts(AVX_4x64f);
transform := TRC(DFT(512)).withTags(opts.tags);
best := DP(transform, rec(), opts);
ruletree := best[1].ruletree;
icode := CodeRuleTree(ruletree, opts);
PrintTo(&quot;AVX_DFT512.c&quot;, PrintCode(&quot;AVX_DFT512&quot;, icode, opts));
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="dpsearch3d.html" class="btn btn-neutral float-right" title="3D FFT with AVX Using Dynamic Programming Search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ompfft.html" class="btn btn-neutral float-left" title="Threaded FFT with OpenMP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SPIRAL Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>